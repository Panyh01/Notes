# [HTML](./index.md) | 03 canvasæ ‡ç­¾<!-- omit in toc -->

ğŸŒ¸Author [**Echo Pan**](https://github.com/echopan)

- [1. ç®€ä»‹](#1-ç®€ä»‹)
- [2. åº”ç”¨é¢†åŸŸ](#2-åº”ç”¨é¢†åŸŸ)
- [3. æ ¼å¼](#3-æ ¼å¼)
- [4. æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆThe rendering contextï¼‰](#4-æ¸²æŸ“ä¸Šä¸‹æ–‡the-rendering-context)
- [5. ç»˜åˆ¶æ¨¡æ¿](#5-ç»˜åˆ¶æ¨¡æ¿)
- [6. å½¢çŠ¶ä¸è·¯å¾„](#6-å½¢çŠ¶ä¸è·¯å¾„)
  - [6.1. ç»˜åˆ¶çŸ©å½¢](#61-ç»˜åˆ¶çŸ©å½¢)
  - [6.2. ç»˜åˆ¶è·¯å¾„](#62-ç»˜åˆ¶è·¯å¾„)
    - [6.2.1. beginPath()](#621-beginpath)
    - [6.2.2. closePath()](#622-closepath)
    - [6.2.3. `stroke()`](#623-stroke)
    - [6.2.4. `fill()`](#624-fill)
    - [6.2.5. `moveTo(x,y)`](#625-movetoxy)
    - [6.2.6. `lineTo(x,y)`](#626-linetoxy)
  - [6.3. ç»˜åˆ¶ä¸‰è§’å½¢](#63-ç»˜åˆ¶ä¸‰è§’å½¢)
  - [6.4. åœ†å¼§ arc](#64-åœ†å¼§-arc)
  - [6.5. è´å¡å°”æ›²çº¿ Bezier](#65-è´å¡å°”æ›²çº¿-bezier)
- [7. é¢œè‰²ä¸æ ·å¼](#7-é¢œè‰²ä¸æ ·å¼)
  - [7.1. çº¯è‰²](#71-çº¯è‰²)
    - [7.1.1. å¡«å……æ ·å¼`fillStyle`](#711-å¡«å……æ ·å¼fillstyle)
    - [7.1.2. æè¾¹æ ·å¼`strokeStyle`](#712-æè¾¹æ ·å¼strokestyle)
    - [7.1.3. é€æ˜åº¦](#713-é€æ˜åº¦)
  - [7.2. çº¿å‹æ ·å¼ Line Style](#72-çº¿å‹æ ·å¼-line-style)
    - [7.2.1. `lineWidth` çº¿æ¡å®½åº¦](#721-linewidth-çº¿æ¡å®½åº¦)
    - [7.2.2. `lineCap` çº¿æ¡æœ«ç«¯æ ·å¼](#722-linecap-çº¿æ¡æœ«ç«¯æ ·å¼)
    - [7.2.3. `lineJoin` çº¿æ¡ä¸çº¿æ¡æ¥åˆå¤„æ ·å¼](#723-linejoin-çº¿æ¡ä¸çº¿æ¡æ¥åˆå¤„æ ·å¼)
  - [7.3. æ¸å˜ Gradients](#73-æ¸å˜-gradients)
    - [7.3.1. çº¿æ€§æ¸å˜](#731-çº¿æ€§æ¸å˜)
    - [7.3.2. å¾„å‘æ¸å˜](#732-å¾„å‘æ¸å˜)
  - [7.4. è™šçº¿ Line Dash](#74-è™šçº¿-line-dash)
  - [7.5. å›¾æ¡ˆ Pattern](#75-å›¾æ¡ˆ-pattern)
  - [7.6. é˜´å½± Shadows](#76-é˜´å½±-shadows)
  - [7.7. å¡«å……è§„åˆ™ fill](#77-å¡«å……è§„åˆ™-fill)
- [8. ç»˜åˆ¶æ–‡æœ¬](#8-ç»˜åˆ¶æ–‡æœ¬)
  - [8.1. å¡«å……æ–‡æœ¬ `fillText`](#81-å¡«å……æ–‡æœ¬-filltext)
  - [8.2. æ–‡æœ¬æè¾¹ `strokeText`](#82-æ–‡æœ¬æè¾¹-stroketext)
  - [8.3. æµ‹é‡å®½åº¦ `measureText`](#83-æµ‹é‡å®½åº¦-measuretext)
- [9. ä½¿ç”¨å›¾åƒ Using Image](#9-ä½¿ç”¨å›¾åƒ-using-image)
  - [9.1. å¼•å…¥å›¾åƒ](#91-å¼•å…¥å›¾åƒ)
  - [9.2. ç»˜åˆ¶å›¾åƒ drawImage()](#92-ç»˜åˆ¶å›¾åƒ-drawimage)
    - [9.2.1. ç®€å•ç»˜åˆ¶](#921-ç®€å•ç»˜åˆ¶)
    - [9.2.2. ç¼©æ”¾ Scaling](#922-ç¼©æ”¾-scaling)
    - [9.2.3. è£åˆ‡ Slicing](#923-è£åˆ‡-slicing)

***

## âœ¨Echoæœ‰è¯è¯´<!-- omit in toc -->

[_Canvasæ•™ç¨‹_](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial)

å¤‡å¿˜ï¼š`proto`

## 1. ç®€ä»‹

`canvas`æ˜¯`HTML5`æä¾›çš„ç”¨äºå±•ç¤ºç»˜å›¾æ•ˆæœçš„æ ‡ç­¾ã€‚

`canvas`æ˜¯ä¸€ä¸ªçŸ©å½¢ç”»å¸ƒï¼Œå¯ä»¥ç”¨`JS`ç»˜å›¾ï¼Œå®ƒæœ¬èº«æ²¡æœ‰ç”»å›¾åŠŸèƒ½ã€‚

## 2. åº”ç”¨é¢†åŸŸ

- **æ¸¸æˆ**
- **æ•°æ®å¯è§†åŒ–**  
  åŒ…æ‹¬ç™¾åº¦çš„`Echarts`ã€`d3.js`ã€`three.js`ã€`higncharts`
- **banner å¹¿å‘Š**ï¼ˆæ¨ªå¹…å¹¿å‘Šï¼‰
- **æ¨¡æ‹Ÿå™¨ï¼Œå›¾å½¢ç¼–è¾‘å™¨**

## 3. æ ¼å¼

`canvas`é»˜è®¤å¤§å°ä¸º 300px * 150pxï¼Œå¯ä»¥è‡ªå®šä¹‰å¤§å°ï¼š

```html
<canvas width="600" height="400"></canvas>
```

æ³¨æ„ï¼Œ`canvas`å¯ä»¥ç”¨CSSæ¥å®šä¹‰å¤§å°ï¼ŒåŒºåˆ«æ˜¯htmlä¸­è®¾ç½®çš„æ˜¯ç”»å¸ƒï¼Œè€Œcssä¸­è®¾ç½®çš„æ˜¯æ¡†æ¶ï¼Œç»˜å›¾æ—¶å›¾ç‰‡ä¼šä¼¸ç¼©æ¥é€‚åº”è¯¥æ¡†æ¶å¤§å°ã€‚è€Œä¸”å½“csså°ºå¯¸æ¯”ä¾‹å’Œç”»å¸ƒä¸ä¸€æ ·æ—¶ï¼Œå›¾åƒå°±ä¼šæ‰­æ›²æ‹‰ä¼¸ã€‚

## 4. æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ˆThe rendering contextï¼‰

`<canvas>`èµ·åˆæ˜¯ç©ºç™½çš„ï¼Œå®ƒå…¬å¼€äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ¸²æŸ“ä¸Šä¸‹æ–‡ç”¨æ¥ç»˜åˆ¶å’Œå¤„ç†å±•ç¤ºçš„å†…å®¹ï¼Œæˆ‘ä»¬çš„æ•™å­¦åŸºäº2Dæ¸²æŸ“ä¸Šä¸‹æ–‡ï¼Œå…¶ä»–å½“ç„¶è¿˜æœ‰`WebGL`ä½¿ç”¨äº†åŸºäº`OpenGL ES`çš„3Dä¸Šä¸‹æ–‡ã€‚

è„šæœ¬è¦å…ˆæ‰¾åˆ°ä¸Šä¸‹æ–‡æ‰èƒ½ç»˜åˆ¶ï¼Œ`canvas`æä¾›ä¸€ä¸ª`getContext()`æ–¹æ³•ï¼Œç”¨æ¥è·å–æ¸²æŸ“ä¸Šä¸‹æ–‡å’Œç»˜å›¾åŠŸèƒ½ã€‚`getContext()`å¯ä»¥æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³ä¸Šä¸‹æ–‡ç±»å‹ã€‚å¯¹äº2Då›¾åƒè€Œè¨€ï¼Œå¯ä»¥ä½¿ç”¨`CanvasRenderingContext2D`æ¥å£ï¼Œè·å–æ–¹æ³•ï¼š

```js
var canvas = document.getElementById('tutorial');
var ctx = canvas.getContext('2d');
```

## 5. ç»˜åˆ¶æ¨¡æ¿

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Canvas tutorial</title>
    <script type="text/javascript">
      function draw(){
        var canvas = document.getElementById('tutorial');
        if (canvas.getContext){
          var ctx = canvas.getContext('2d');
        }
      }
    </script>
    <style type="text/css">
      canvas { border: 1px solid black; }
    </style>
  </head>
  <body onload="draw();">
    <canvas id="tutorial" width="150" height="150"></canvas>
  </body>
</html>
```

è¯´æ˜ï¼šå†™çš„`script`ä»£ç å¯ä»¥æ”¾åœ¨`body`å°¾éƒ¨ï¼Œè¿™æ ·åŠ è½½ç½‘é¡µæ—¶ä¼šè‡ªåŠ¨åŠ è½½ï¼›ä¹Ÿå¯ä»¥æ”¾åœ¨`head`æˆ–å…¶ä»–ä»»æ„ä½ç½®ï¼Œè¿™æ ·å°±éœ€è¦ç»™åŠŸèƒ½ä»£ç å¥—ä¸€ä¸ªå‡½æ•°`function`ï¼Œç„¶ååœ¨`html`æ ‡ç­¾ä¸­ä½¿ç”¨`onload="å‡½æ•°"`æˆ–åœ¨`script`ä¸­ç”¨`window.onload=å‡½æ•°`è°ƒç”¨ã€‚

## 6. å½¢çŠ¶ä¸è·¯å¾„

`canvas`æ”¯æŒç»˜åˆ¶çŸ©å½¢å’Œè·¯å¾„ã€‚

### 6.1. ç»˜åˆ¶çŸ©å½¢

```js
fillRect(x,y,width,height);//å¡«å……çŸ©å½¢
strokeRect(x,y,width,height);//çŸ©å½¢è¾¹æ¡†
clearRect(x,y,width,height);//æ¸…é™¤çŸ©å½¢åŒºåŸŸï¼ˆé€æ˜ï¼‰ï¼Œæ©¡çš®æ“¦åŠŸèƒ½
```

è¿™ä¸‰ä¸ªå‡½æ•°ä½¿ç”¨åä¼šè‡ªåŠ¨ç»˜åˆ¶ï¼Œä¸åé¢çš„è·¯å¾„å‡½æ•°ï¼ˆPath functionï¼‰æœ‰æ‰€åŒºåˆ«ã€‚

å¦‚æœä½¿ç”¨çš„æ˜¯`rect()`å‡½æ•°çš„è¯ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è®¾ç½®`fill`è¿˜æ˜¯`stroke`ã€‚

### 6.2. ç»˜åˆ¶è·¯å¾„

æ­¥éª¤ï¼š

1. åˆ›å»ºè·¯å¾„èµ·ç‚¹
2. ä½¿ç”¨ç”»å›¾å‘½ä»¤
3. å…³é—­è·¯å¾„
4. æè¾¹æˆ–å¡«å……è·¯å¾„

#### 6.2.1. beginPath()

æ–°å»ºä¸€æ¡è·¯å¾„ï¼Œå°†å›¾å½¢ç»˜åˆ¶å‘½ä»¤æŒ‡å‘è¯¥è·¯å¾„ã€‚åœ¨ç»˜åˆ¶è·¯å¾„çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ªè·¯å¾„åˆ—è¡¨è®°å½•å­è·¯å¾„ï¼Œå³ä¸€ä¸ª`beginPath()`ä¸‹çš„æ‰€æœ‰è·¯å¾„ã€‚è€Œå½“é‡æ–°å¼€å§‹ä¸€ä¸ª`beginPath()`æ—¶ï¼Œä¼šæ¸…ç©ºä¹‹å‰ä¿å­˜çš„è®°å½•ï¼Œæ— è®ºæ˜¯å¦`stroke()`æˆ–è€…`fill()`ã€‚

[ä½¿ç”¨Canvasç»˜åˆ¶å›¾å½¢](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes)

***

#### 6.2.2. closePath()

é—­åˆè·¯å¾„ï¼Œå°†å›¾å½¢ç»˜åˆ¶å‘½ä»¤é‡æ–°æŒ‡å‘ä¸Šä¸‹æ–‡ã€‚ä¸æ˜¯å¿…éœ€çš„ã€‚

è¯¥å‘½ä»¤ä¼šå°è¯•è¿æ¥å½“å‰ç‚¹å’Œèµ·å§‹ç‚¹ï¼Œä½¿å›¾å½¢é—­åˆï¼Œå¦‚æœå·²ç»æ˜¯é—­åˆå›¾å½¢æˆ–åªæœ‰ä¸€ä¸ªç‚¹åˆ™ä¸ä½œæ“ä½œã€‚ä½†æ˜¯è¯¥å‘½ä»¤ä¸ä¼šé‡å»ºä¸€æ¡æ–°è·¯å¾„ï¼Œå®ƒä¸`beginPath()`æ²¡æœ‰å…³ç³»ã€‚

å½“è°ƒç”¨`fill()`æ—¶ï¼Œæœªé—­åˆå½¢çŠ¶è‡ªåŠ¨é—­åˆï¼Œä½†æ˜¯`stroke()`ä¸ä¼šã€‚

**æ³¨æ„ï¼ŒbeginPathå’ŒclosePathä¸æ˜¯å¿…é¡»çš„ã€‚**

[_canvasé‡Œçš„beginPathå’ŒclosePath_](https://blog.csdn.net/weixin_34124651/article/details/89009953?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-2.fixedcolumn&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EOPENSEARCH%7Edefault-2.fixedcolumn)&emsp;[_ç†è§£beginPathå’ŒclosePath_](https://blog.csdn.net/qq_33448537/article/details/61698180)

***

#### 6.2.3. `stroke()`

é€šè¿‡çº¿æ¡ç»˜åˆ¶å›¾å½¢è½®å»“,å°†è·¯å¾„åˆ—è¡¨ä¸­çš„å­è·¯å¾„å…¨éƒ¨ç»˜å‡ºã€‚

#### 6.2.4. `fill()`

é€šè¿‡å¡«å……è·¯å¾„å†…å®¹ç”Ÿæˆå®å¿ƒçš„å›¾å½¢ã€‚

#### 6.2.5. `moveTo(x,y)`

ç§»åŠ¨ç”»ç¬”åˆ°æŒ‡å®šçš„xå’Œyåæ ‡ä¸Šï¼Œè®¾ç½®è·¯å¾„èµ·ç‚¹ã€‚

#### 6.2.6. `lineTo(x,y)`

ç»˜åˆ¶ç›´çº¿ï¼Œä»å½“å‰ä½ç½®åˆ°xå’Œyåæ ‡ä¸Šã€‚

### 6.3. ç»˜åˆ¶ä¸‰è§’å½¢

```js
  // å¡«å……ä¸‰è§’å½¢
  ctx.beginPath();
  ctx.moveTo(25, 25);
  ctx.lineTo(105, 25);
  ctx.lineTo(25, 105);
  ctx.fill();

  // æè¾¹ä¸‰è§’å½¢
  ctx.beginPath();
  ctx.moveTo(125, 125);
  ctx.lineTo(125, 45);
  ctx.lineTo(45, 125);
  ctx.closePath();
  ctx.stroke();
```

### 6.4. åœ†å¼§ arc

ä½¿ç”¨`arc()`æ–¹æ³•ç»˜åˆ¶åœ†æˆ–åœ†å¼§ã€‚

è¯­æ³•ï¼š

```js
arc(x, y, radius, startAngle, endAngle <, anticlockwise>);
//x,y:ç¡®å®šåœ†å¿ƒä½ç½®
//radius:åŠå¾„é•¿åº¦
//startAngle:èµ·ç‚¹ï¼ŒæŒ‰xè½´æ–¹å‘ç®—ï¼Œå•ä½å¼§åº¦
//endAngle:ç»ˆç‚¹
//anticlockwise:å¯é€‰ï¼Œtrueé€†æ—¶é’ˆï¼Œfalseé»˜è®¤é¡ºæ—¶é’ˆ
```

å› ä¸ºé‡‡ç”¨å¼§åº¦åˆ¶ï¼Œæ‰€ä»¥è¡¨è¾¾çš„æ—¶å€™å¯ä»¥è¿™ä¹ˆå†™`Math.PI*2`ã€‚

ç®€å•ç”»ä¸ªåœ†ï¼š

```js
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

ctx.beginPath();//å¼€å§‹è·¯å¾„
ctx.arc(75, 75, 50, 0, 2 * Math.PI);//åœ†
ctx.stroke();//ç»˜åˆ¶è·¯å¾„
```

å¦‚æœè¦ç»˜åˆ¶æ‰‡å½¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯`moveTo`åˆ°åœ†å¿ƒï¼Œç„¶åç»˜åˆ¶åœ†å¼§ï¼Œæœ€åé—­åˆè·¯å¾„ï¼›å¦ä¸€ç§æ–¹æ³•æ˜¯å…ˆç”»åœ†å¼§ï¼Œç„¶å`lineTo`åˆ°åœ†å¿ƒï¼Œæœ€åé—­åˆè·¯å¾„ã€‚

### 6.5. è´å¡å°”æ›²çº¿ Bezier

ä½¿ç”¨è´å¡å°”æ›²çº¿ç»˜åˆ¶è·¯å¾„ã€‚è¯­æ³•ï¼š

```js
//ç¡®å®šèµ·å§‹ç‚¹
moveTo(x,y);
//äºŒæ¬¡è´å¡å°”æ›²çº¿ï¼Œç¬¬ä¸€ä¸ªåæ ‡ä¸ºæ§åˆ¶ç‚¹ï¼Œç¬¬äºŒä¸ªåæ ‡ä¸ºç»“æŸç‚¹
quadraticCurveTo(cp1x, cp1y, x, y);
//ä¸‰æ¬¡è´å¡å°”æ›²çº¿ï¼Œä¾æ¬¡ä¸ºæ§åˆ¶ç‚¹1ï¼Œæ§åˆ¶ç‚¹2ï¼Œç»“æŸç‚¹
bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
```

![å‚è€ƒå›¾](https://media.prod.mdn.mozit.cloud/attachments/2012/07/09/223/c6ec7dd953e455094b46f514ba24680c/Canvas_curves.png)

[_MDN - ç»˜åˆ¶åœ†å¼§_](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes#åœ†å¼§)&emsp;[_åœ†å’Œå¼§åº¦_](http://c.biancheng.net/ref/62.html)&emsp;[_è´å¡å°”æ›²çº¿_](https://blog.csdn.net/weixin_42513339/article/details/83019610)

## 7. é¢œè‰²ä¸æ ·å¼

### 7.1. çº¯è‰²

#### 7.1.1. å¡«å……æ ·å¼`fillStyle`

ä¿®æ”¹å¡«å……é¢œè‰²ã€‚è¯­æ³•ï¼š

```js
// è¿™äº› fillStyle çš„å€¼å‡ä¸º 'æ©™è‰²'
ctx.fillStyle = "orange";
ctx.fillStyle = "#FFA500";
ctx.fillStyle = "rgb(255,165,0)";
ctx.fillStyle = "rgba(255,165,0,1)";
```

#### 7.1.2. æè¾¹æ ·å¼`strokeStyle`

ä¿®æ”¹æè¾¹é¢œè‰²ï¼Œç”¨æ³•ä¸`fillStyle`ç±»ä¼¼ã€‚

#### 7.1.3. é€æ˜åº¦

å¯ä»¥é€šè¿‡`globalAlpha`æˆ–è€…`rgba`æ¥è®¾ç½®é€æ˜åº¦ã€‚

### 7.2. çº¿å‹æ ·å¼ Line Style

#### 7.2.1. `lineWidth` çº¿æ¡å®½åº¦

æ³¨æ„å½“çº¿æ¡å®½åº¦æ²¡æœ‰å®Œå…¨å æ®åƒç´ æ ¼å­æ—¶ï¼Œå¸¦æ¥çš„æ¨¡ç³Šæ¸²æŸ“é—®é¢˜ã€‚

#### 7.2.2. `lineCap` çº¿æ¡æœ«ç«¯æ ·å¼

çº¿æ®µæœ«ç«¯æ ·å¼ï¼ŒåŒ…æ‹¬ä¸‰ç§ï¼š

1. `butt`ï¼Œæœ«ç«¯å¹³é½ï¼Œé»˜è®¤
2. `round` æœ«ç«¯æ˜¯ä¸º1/2çº¿å®½çš„åŠåœ†
3. `square` æœ«ç«¯æ˜¯é«˜åº¦ä¸º1/2çº¿å®½çš„æ–¹å—

#### 7.2.3. `lineJoin` çº¿æ¡ä¸çº¿æ¡æ¥åˆå¤„æ ·å¼

çº¿æ®µè¿æ¥å¤„æ ·å¼ï¼Œæ‹¿æŠ˜çº¿ä¸¾ä¾‹ï¼š

1. `miter` è¿æ¥å¤„å‘å¤–å»¶ä¼¸ï¼ˆå°–è§’ï¼‰ï¼Œé»˜è®¤
2. `round` ç£¨åœ†è¿æ¥å¤„ï¼ˆåœ†è§’ï¼‰ï¼Œåœ†åŠå¾„ç­‰äºçº¿å®½
3. `bevel` å¹³è§’

### 7.3. æ¸å˜ Gradients

#### 7.3.1. çº¿æ€§æ¸å˜

```js
//èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œè¡¨ç¤ºä¸€æ¡çº¿æ®µ,ç±»ä¼¼äºPSé‡Œçš„æ¸å˜å·¥å…·
var lg=ctx.createLinearGradient(x1,y1,x2,y2);
```

y1 å’Œ y2 å†³å®šäº†æ¸å˜å­˜åœ¨çš„èŒƒå›´  
x1 å’Œ x2 å†³å®šäº†æ¸å˜çš„æ–¹å‘

é¦–å…ˆè®¾ç½®é¢œè‰²æ ·å¼ï¼Œå¹¶æŠŠè¯¥é¢œè‰²è®¾ç½®ä¸ºå½“å‰é¢œè‰²ï¼š

```js
//addColorStop(position, color);
//positionä»‹äº0.0-1.0ï¼Œé¢œè‰²ç›¸å¯¹ä½ç½®
lg.addColorStop(0,"white");//åœ¨èµ·å§‹ä½ç½®ä¸ºç™½è‰²
lg.addColorStop(0.5,"black");//åœ¨ä¸­é—´ä½ç½®ä¸ºé»‘è‰²

ctx.fillStyle=lg;
```

æ³¨æ„ï¼Œè®¾ç½®çš„é¢œè‰²ä½ç½®ç›¸å¯¹äºç”»å¸ƒæ˜¯å›ºå®šçš„ï¼Œå½“ç”»ä¸Šå›¾å½¢çš„æ—¶å€™ï¼Œä¸å›¾å½¢é‡å éƒ¨åˆ†çš„è¯¥é¢œè‰²ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚å®é™…ä¸Šï¼Œè¿™é‡Œçš„ç”»å›¾ä»…ç›¸å½“äºè§£é™¤é€æ˜çš„ä½œç”¨ï¼ŒçœŸæ­£çš„å›¾å½¢æ˜¯è®¾ç½®çš„é¢œè‰²ã€‚

```js
//ç»˜å‡ºå›¾å½¢ï¼Œå›¾å½¢æ‰€åœ¨åŒºåŸŸä¼šæ˜¾ç¤ºè®¾ç½®çš„æ¸å˜è‰²
ctx.fillRect(50,50,50,50);
```

å®é™…ä½¿ç”¨ä¸­å­˜åœ¨çš„é—®é¢˜ï¼šè®¾ç½®çš„æ˜¯ä¸¤ä¸ªåæ ‡ç‚¹ï¼Œä¸æ˜¯é•¿å®½ï¼›æ²¡æœ‰ç†è§£xå’Œyå®é™…å†³å®šäº†ä»€ä¹ˆï¼Œxæ˜¯æ–¹å‘ï¼Œyæ˜¯èŒƒå›´ã€‚

#### 7.3.2. å¾„å‘æ¸å˜

```js
//åœ†1ï¼šåŸç‚¹+åŠå¾„ï¼Œåœ†2ï¼šåŸç‚¹+åŠå¾„
var rg=ctx.createRadialGradient(x1, y1, r1, x2, y2, r2);

//ä¸¾ä¾‹
var rg=ctx.createRadialGradient(75,75,10,75,75,50);
rg.addColorStop(0,"pink");//0æ˜¯åœ†1è¾¹ç¼˜
rg.addColorStop(0.8,"purple")//0-1ä¹‹é—´çš„å‚æ•°ä¸ºè¿‡æ¸¡
rg.addColorStop(1,"yellow");//1æ˜¯åœ†2è¾¹ç¼˜

ctx.fillStyle=rg;//å°†æ ·å¼æ”¹ä¸ºrg
ctx.fillRect(0,0,150,150);//æ˜¾ç¤ºè®¾ç½®çš„æ ·å¼
```

### 7.4. è™šçº¿ Line Dash

`setLineDash`å®šåˆ¶è™šçº¿æ ·å¼ï¼š

```js
//æŒ‡å®šçº¿æ®µä¸é—´éš™,å¥‡æ•°ä½çº¿æ®µï¼Œå¶æ•°ä½é—´éš™
ctx.setLineDash([4,2,10,6]);
```

`lineDashOffest`è®¾ç½®èµ·å§‹åç§»é‡ï¼Œé»˜è®¤ä¸º0ã€‚

### 7.5. å›¾æ¡ˆ Pattern

```js
var ptrn=ctx.createPattern(image, type);
//imageå¯ä»¥æ˜¯imageå¯¹è±¡æˆ–è€…å¦ä¸€ä¸ªcanvaså¯¹è±¡
//Typeçš„å€¼åŒ…æ‹¬repeatï¼Œrepeat-xï¼Œrepeat-yï¼Œno-repeat

//ä¾‹å­
var img = new Image();
img.src = 'someimage.png';
var ptrn = ctx.createPattern(img,'repeat');
ctx.fillStyle = ptrn;
ctx.fillRect(0, 0, 150, 150);
```

### 7.6. é˜´å½± Shadows

- `shadowOffsetX` xè½´åç§»
- `shadowOffsetY` yè½´åç§»
- `shadowBlur` æ¨¡ç³Šåº¦
- `shadowColor` é˜´å½±é¢œè‰²

```js
ctx.shadowOffsetX = 2;
ctx.shadowOffsetY = 2;
ctx.shadowBlur = 2;
ctx.shadowColor = "rgba(0, 0, 0, 0.5)";
```

### 7.7. å¡«å……è§„åˆ™ fill

- `ctx.fill("nonzero")` é»˜è®¤å€¼ï¼Œå®Œå…¨å¡«å……
- `ctx.fill("evenodd")` é‡å éƒ¨åˆ†é€æ˜

## 8. ç»˜åˆ¶æ–‡æœ¬

é€šè¿‡`ctx.font=""`è®¾ç½®å­—ä½“æ ·å¼ï¼Œå’Œåœ¨cssä¸­è®¾ç½®ç±»ä¼¼ã€‚

å…¶ä»–çš„å±æ€§è®¾ç½®è¿˜åŒ…æ‹¬ï¼š

- `textAlign` å€¼åŒ…æ‹¬`start`,`end`,`left`,`right`,`center`
- `textBaseline` å€¼åŒ…æ‹¬`alphabetic`,`top`,,`haning`,`bottom`,`middle`ç­‰
- `direction` å€¼åŒ…æ‹¬`ltr`,`rtl`,`inherit`

![canvas-textBaseline](../images/html/canvas-textbaseline.png)

### 8.1. å¡«å……æ–‡æœ¬ `fillText`

```js
fillText(text,x,y[,maxWidth]);

//ä¾‹å­
ctx.font = "48px serif";
ctx.fillText("Hello world", 10, 50);
```

### 8.2. æ–‡æœ¬æè¾¹ `strokeText`

```js
strokeText(text,x,y[,maxWidth]);
```

### 8.3. æµ‹é‡å®½åº¦ `measureText`

```js
var measureText=ctx.measureText('æ–‡æœ¬å†…å®¹');//è·å–æµ‹é‡å¯¹è±¡
var width=measureText.width;//è·å–å®½åº¦å±æ€§
```

å…³äºç¬¬ä¸€æ¬¡æµ‹å‡ºçš„å®½åº¦å’Œç¬¬äºŒæ¬¡ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œæ˜¯å› ä¸ºå®½åº¦æ˜¯æ ¹æ®å­—ä½“å¤§å°æ¥è®¡ç®—çš„ï¼Œéœ€è¦æŠŠ`measureText`æ”¾åˆ°`font`åé¢ã€‚

[_ç»˜åˆ¶æ–‡æœ¬_](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_text)&emsp;[_æµ‹é‡å®½åº¦_](https://www.cnblogs.com/xiaoxuStudy/p/12229819.html)&emsp;[_measureText_](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/measureText)

## 9. ä½¿ç”¨å›¾åƒ Using Image

### 9.1. å¼•å…¥å›¾åƒ

å›¾ç‰‡æºå¯ä»¥æ˜¯ï¼š

- ä»»æ„`Image()`å‡½æ•°æ„é€ å¯¹è±¡æˆ–`<img>`å…ƒç´ 
- `<video>`å…ƒç´ ä¸­çš„ä¸€å¸§
- å¦ä¸€ä¸ª`<canvas>`å…ƒç´ 

[ä¸¾ä¾‹](https://www.html5canvastutorials.com/tutorials/html5-canvas-images/)ï¼š

```js
var img=new Image();//åˆ›å»ºimageå¯¹è±¡ï¼Œç”¨äºåŠ è½½å›¾åƒç¼“å­˜

img.onload=function(){
    context.drawImage(img,69,50);
};
img.src="image url";
```

### 9.2. ç»˜åˆ¶å›¾åƒ drawImage()

#### 9.2.1. ç®€å•ç»˜åˆ¶

```js
drawImage(image,x,y);
//xï¼Œyæ˜¯èµ·å§‹åæ ‡
```

#### 9.2.2. ç¼©æ”¾ Scaling

```js
drawImage(image,x,yï¼Œwidthï¼Œheight);
//widthå’Œheightä¸ºç¼©æ”¾å¤§å°
```

#### 9.2.3. è£åˆ‡ Slicing

```js
drawImage(image,sx,syï¼ŒsWidthï¼ŒsHeight,dx,dy,dWidth,dHight);
//dxå’Œdyæ˜¯å¿…é¡»å‚æ•°ï¼Œç»˜åˆ¶èµ·å§‹åæ ‡
//dwå’Œwhæ˜¯ç»˜åˆ¶å®½é«˜ï¼Œå…è®¸ç¼©æ”¾å›¾åƒ
//sxå’Œsyæ˜¯è£åˆ‡èµ·å§‹ç‚¹ï¼ˆç›¸å¯¹æºè€Œè¨€ï¼‰
//swå’Œshæ˜¯è£åˆ‡å®½é«˜
```

ç»˜åˆ¶æµç¨‹ï¼šå‰å››ä¸ªå‚æ•°å…ˆå¯¹æºå›¾åƒè¿›è¡Œè£åˆ‡ï¼Œç„¶åé€šè¿‡åå››ä¸ªå‚æ•°æŠŠè£åˆ‡åçš„å›¾åƒç»˜åˆ¶åœ¨ç”»å¸ƒä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ**è£åˆ‡å‚æ•°æ˜¯ç›¸å¯¹å›¾åƒæºè€Œè¨€çš„ï¼Œç»˜åˆ¶å‚æ•°æ˜¯ç›¸å¯¹ç”»å¸ƒè€Œè¨€çš„ï¼Œç¼©æ”¾é’ˆå¯¹çš„æ˜¯è£åˆ‡åçš„æ–°å›¾**ã€‚

***
[ä¸Šä¸€ç« ï¼š02.æ …æ ¼ç³»ç»Ÿ](./02.æ …æ ¼ç³»ç»Ÿ.md)  

[ä¸‹ä¸€ç« ï¼š04.canvasæ ‡ç­¾2](./04.canvasæ ‡ç­¾2.md)  

[è¿”å›ç›®å½•](./index.md)