# [JSP](./index.md) | 03 åˆ›å»ºServletã€é…ç½®ã€å¸¸è§é—®é¢˜

ğŸŒ¸Author [**Echo Pan**](https://github.com/echopan)

- [JSP | 03 åˆ›å»ºServletã€é…ç½®ã€å¸¸è§é—®é¢˜](#jsp--03-åˆ›å»ºservleté…ç½®å¸¸è§é—®é¢˜)
  - [âœ¨Echoæœ‰è¯è¯´](#echoæœ‰è¯è¯´)
  - [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
  - [éƒ¨ç½²æè¿°ç¬¦ï¼š``web.xml``](#éƒ¨ç½²æè¿°ç¬¦webxml)
    - [æ ¹èŠ‚ç‚¹ï¼š\<web-app> æ ‡ç­¾](#æ ¹èŠ‚ç‚¹web-app-æ ‡ç­¾)
    - [\<display-name?> æ ‡ç­¾](#display-name-æ ‡ç­¾)
    - [\<welcome-file-list?> æ ‡ç­¾](#welcome-file-list-æ ‡ç­¾)
    - [\<servlet*> å’Œ \<servlet-mapping*> æ ‡ç­¾](#servlet-å’Œ-servlet-mapping-æ ‡ç­¾)
      - [\<url-pattern> åŒ¹é…è§„åˆ™](#url-pattern-åŒ¹é…è§„åˆ™)
    - [\<context-param*> æ ‡ç­¾](#context-param-æ ‡ç­¾)
    - [\<session-config?> æ ‡ç­¾](#session-config-æ ‡ç­¾)
  - [Servlet æ³¨è§£ï¼š``@WebServlet``](#servlet-æ³¨è§£webservlet)
    - [å¼€å¯/å…³é—­æ³¨è§£](#å¼€å¯å…³é—­æ³¨è§£)
    - [ç®€å•åº”ç”¨](#ç®€å•åº”ç”¨)
    - [å…·ä½“åº”ç”¨](#å…·ä½“åº”ç”¨)
    - [ä¼˜ç¼ºç‚¹åˆ†æ](#ä¼˜ç¼ºç‚¹åˆ†æ)
      - [@WebServlet æ³¨è§£](#webservlet-æ³¨è§£)
      - [web.xml é…ç½®æ–‡ä»¶](#webxml-é…ç½®æ–‡ä»¶)
  - [Servlet ä»£ç æ¨¡æ¿](#servlet-ä»£ç æ¨¡æ¿)
    - [å¯¼å…¥çš„åŒ…](#å¯¼å…¥çš„åŒ…)

## âœ¨Echoæœ‰è¯è¯´

æœ¬ç« åŒ…å«ä½¿ç”¨MyEclipseåˆ›å»ºä¸€ä¸ªServletæ–‡ä»¶ï¼Œé…ç½®å¥½æœ‰å…³çš„å‚æ•°ï¼Œè°ƒè¯•è¿è¡Œä»¥åŠä¸€äº›å¸¸è§é—®é¢˜ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±é‡åˆ°çš„é—®é¢˜çš„è§£å†³åŠæ³•ã€‚

## é…ç½®è¯´æ˜

æœ‰ä¸¤ç§æ–¹å¼è®¾ç½®åˆå§‹åŒ–é…ç½®ä¿¡æ¯ï¼Œä¸€ç§æ˜¯é€šè¿‡``/WEB-INF``ä¸‹çš„``web.xml``æ–‡ä»¶ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨``@WebServlet``æ³¨è§£ï¼ˆannotationï¼‰ã€‚

## éƒ¨ç½²æè¿°ç¬¦ï¼š``web.xml``

```xml
<?xml version="1.0" encoding="UTF-8"?>
```

**è¯´æ˜**â¬‡ï¸

``version``ï¼š``xml`` ç‰ˆæœ¬ä¸º1.0  
``encoding``ï¼šæ•°æ®ä¼ è¾“ç¼–ç ä¸ºUTF-8

### æ ¹èŠ‚ç‚¹ï¼š\<web-app> æ ‡ç­¾

**Servlet 2.5 /Tomcat 6.0.x æ¨¡æ¿**

```xml
<web-app 
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  version="2.5">  

</web-app>
```

**Servlet 3.0 /Tomcat 7.0.x æ¨¡æ¿**

```xml
<web-app 
  xmlns="http://java.sun.com/xml/ns/javaee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
  version="3.0" >  

</web-app>
```

å½“ä¸€ä¸ª``xml``æ–‡æ¡£åŒ…å«ä¸¤ç§å®šä¹‰ä¸åŒï¼Œä½†æ˜¯åç§°ç›¸åŒçš„å…ƒç´ æ—¶ï¼Œ``xml``è§£æå™¨ï¼ˆparserï¼‰æ˜¯æ— æ³•è§£æçš„ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡åœ¨å…ƒç´ åç§°å‰æ·»åŠ å‰ç¼€æ¥é¿å…è¯¥é—®é¢˜ï¼Œæ¯”å¦‚``<h:table>``å’Œ``<f:table>``ã€‚ä½†æ˜¯è¿™ä¸èƒ½è§£å†³å…¨éƒ¨çš„å‘½åå†²çªï¼Œå°¤å…¶æ˜¯å½“ä¸€ä¸ª``xml``æ–‡æ¡£æ‹¥æœ‰ä¼—å¤šå…ƒç´ æˆ–è€…å¤šä¸ª``xml``æ–‡æ¡£äº’ç›¸åŒ…å«æˆ–å¼•ç”¨æ—¶ã€‚

è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ï¼Œè€Œæœ€å¥½çš„å…¨å±€å”¯ä¸€æ€§å­—ç¬¦ä¸²è«è¿‡äº``URI``äº†ã€‚æ¯”å¦‚ï¼š  

``<h:table xmlns:h="https://html.spec.whatwg.org/multipage/"></h:table>``

ä½†æ˜¯åœ¨æˆ‘ä»¬çš„``<web-app>``æ ‡ç­¾ä¸­å¹¶æ²¡æœ‰æ·»åŠ å‰ç¼€ï¼Œè¿™é‡Œå®é™…ä¸Šä½¿ç”¨äº†é»˜è®¤çš„å‘½åç©ºé—´ï¼Œå³``xmlns="namespaceURI"``ã€‚è¯¥å…ƒç´ å†…éƒ¨çš„å­å…ƒç´ ä¹Ÿä¼šé»˜è®¤å±äºè¯¥å‘½åç©ºé—´ä¸‹ï¼Œæ— éœ€åˆ†åˆ«æ·»åŠ å‰ç¼€ã€‚

å› æ­¤ï¼Œ``xmlns:xsi``å®é™…æ˜¯å®šä¹‰äº†ä¸€ä¸ªå‰ç¼€ä¸º``xsi``çš„å‘½åç©ºé—´ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°è®¸å¤š``xml``æ–‡æ¡£éƒ½ç”¨åˆ°äº†``xsi(xml schema instance)``è¿™ä¸ªå‰ç¼€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒæ˜¯è¡Œä¸šé»˜è®¤çš„ç”¨äº``XSDï¼ˆXML Schema Definitionï¼‰`` æ–‡ä»¶çš„å‘½åç©ºé—´ã€‚

- XSDä¹Ÿè¢«ç§°ä¸ºSchemaï¼Œæ˜¯ç”¨æ¥å®šä¹‰XMLæ–‡ä»¶ç»“æ„çš„ã€‚XMLè§£æå™¨å¯ä»¥æ ¹æ®XSDæ–‡ä»¶è§£æXMLæ–‡ä»¶ï¼Œåˆ¤æ–­è¯¥æ–‡ä»¶ç»“æ„æ˜¯å¦ä¸XSDä¸­å®šä¹‰ä¸€è‡´ã€‚

``xsi:schemaLocation="key value"``

``schemaLocation``æ˜¯å‘½åç©ºé—´``xsi``ä¸‹çš„ä¸€ä¸ªå…ƒç´ ï¼Œå…¶å€¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªç”±ç©ºæ ¼åˆ†å¼€çš„é”®å€¼å¯¹ã€‚é€šè¿‡è¿™ä¸ªå…ƒç´ æŒ‡å®šå‘½åç©ºé—´``xmlns``ä¸å¯¹åº”çš„``XSD``æ–‡ä»¶ç›¸å…³è”ã€‚key ä»£è¡¨å‘½åç©ºé—´ï¼Œéœ€è¦å’Œ``xmlns``ç›¸åŒ¹é…ã€‚value æŒ‡ä»£``XSD location URI``ï¼ŒæŒ‡ç¤ºäº†key æ‰€ä»£è¡¨çš„çš„å‘½åç©ºé—´æ‰€å¯¹åº”çš„``XSD``æ–‡ä»¶çš„ä½ç½®ï¼Œ``XML``è§£æå™¨å¯ä»¥æ ¹æ®è¯¥ä¿¡æ¯è·å–åˆ°``XSD``æ–‡ä»¶ï¼Œç„¶åå¯¹æ‰€æœ‰å±äº``key``å‘½åç©ºé—´çš„å…ƒç´ ç»“æ„è¿›è¡Œæ ¡éªŒã€‚å› æ­¤``value``ä¸€èˆ¬æ˜¯å¯ä»¥è®¿é—®çš„ã€‚

``version``å±æ€§å†³å®šäº†``XML``è§£æå™¨çš„è§£æè§„åˆ™ï¼ˆæ ¹æ®çš„``Servlet``ç‰ˆæœ¬ï¼‰ã€‚


[*.xmlå¤´éƒ¨è¯¦è§£*](https://blog.csdn.net/lengxiao1993/article/details/77914155)&emsp;[*xsi:schemaLocationè¯¦è§£*](https://blog.csdn.net/zhengyeqing520/article/details/6091656)

***

``web.xml``èŠ‚ç‚¹åŠ è½½é¡ºåºï¼ˆç›¸åŒå…ƒç´ æŒ‰é¡ºåºåŠ è½½ï¼‰ï¼š  

**\<context-param>**-->**\<listener>**-->**\<filter>**-->**\<servlet>**

**æ³¨ï¼š** å¯é€‰ä¸”ä»…èƒ½å‡ºç°ä¸€æ¬¡çš„å…ƒç´ ç”¨``?``æ ‡è®°,å¯å‡ºç°é›¶æ¬¡æˆ–å¤šæ¬¡çš„å…ƒç´ ç”¨``*``æ ‡è®°ã€‚

### \<display-name?> æ ‡ç­¾

``<display-name>``ç”¨äºå®šä¹‰``web``åº”ç”¨çš„åç§°ã€‚

```xml
<display-name>TestProject</display-name>
```

### \<welcome-file-list?> æ ‡ç­¾

```xml
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
```

**å­å…ƒç´ **â¬‡ï¸

- ``<welcome-file>`` ç”¨æ¥æŒ‡å®šé¦–é¡µæ–‡ä»¶ï¼ŒæŒ‰é¡ºåºåŒ¹é…

### \<servlet*> å’Œ \<servlet-mapping*> æ ‡ç­¾

```xml
<servlet>
  <description>æè¿°ä¿¡æ¯</description>
  <display-name>Servletå¤–æ˜¾çŸ­åç§°</display-name>
  <servlet-name>MyServlet</servlet-name>
  <servlet-class>Echo.Defined.Test.MyServlet</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>MyServlet</servlet-name>
  <url-pattern>/servlet/MyServlet</url-pattern>
</servlet-mapping>
```

1ï¸âƒ£ ``<servlet>``æ ‡ç­¾ç”¨æ¥å£°æ˜ä¸€ä¸ª``Servlet``ã€‚

**å­å…ƒç´ **â¬‡ï¸

- ``<display-name>`` å¤–æ˜¾åç§°ï¼ŒæŸäº›GUIå·¥å…·ï¼ˆå¦‚webæµè§ˆå™¨ï¼‰ã€æ§åˆ¶å°å¯èƒ½ä¼šè¯»å–å¹¶æ˜¾ç¤º
- ``<servlet-name>`` å†…éƒ¨åç§°ï¼ŒæŒ‡å®š``Servlet``åç§°
- ``<description>`` æè¿°ä¿¡æ¯
- ``<icon>`` å›¾æ ‡ï¼Œå¯åœ¨æ”¯æŒçš„æ§åˆ¶å°ã€GUIå·¥å…·æ˜¾ç¤ºè¯¥Servletï¼Œå’Œç½‘é¡µçš„``favicon``æ— å…³
  - ``<small-icon>`` 16 x 16
  - ``<large-icon>`` 32 x 32
- ``<servlet-class>`` äºŒé€‰ä¸€ï¼ŒæŒ‡å®š``Servlet``å®Œæ•´ç±»å
- ``<jsp-file>`` äºŒé€‰ä¸€ï¼ŒæŒ‡å®šåº”ç”¨å†…JSPå®Œæ•´è·¯å¾„ï¼Œä»¥``/``å¼€å¤´
- ``<load-on-startup>`` å¯åŠ¨``Web``åº”ç”¨æ—¶å†³å®š``Servlet``çš„è½½å…¥é¡ºåºï¼Œå€¼ä¸ºç©ºæˆ–è´Ÿæ•°æ—¶å½“å®¢æˆ·é¦–æ¬¡è®¿é—®æ—¶è½½å…¥
- ``<init-param>`` åˆå§‹å‚æ•°ï¼Œå¯è¢«è¯¥ç±»çš„``ServletConfig``è°ƒç”¨
  - ``<param-name>`` å‚æ•°å
  - ``<param-value>`` å‚æ•°å€¼

2ï¸âƒ£ ``<servlet-mapping>`` ``Servlet``æ˜ å°„ï¼Œç”¨æ¥å°†URLåœ°å€æ˜ å°„åˆ°æŸä¸ª``Servlet``ä¸Šã€‚

**å­å…ƒç´ **â¬‡ï¸

- ``<servlet-name>`` æŒ‡å®š``Servlet``åç§°
- ``<url-pattern>``  æŒ‡å®š``Servlet``å¯¹åº”çš„URL

#### \<url-pattern> åŒ¹é…è§„åˆ™

``<url-pattern>``æœ‰å…¶ç‰¹å®šçš„åŒ¹é…è§„åˆ™ï¼Œä»``Servlet 2.5``å¼€å§‹ï¼Œä¸€ä¸ª``Servlet``æ”¯æŒåŒ¹é…å¤šä¸ª``<url-pattern>``è§„åˆ™ã€‚ä¸€ä¸ª``Servlet``ä¹Ÿå¯ä»¥è®¾ç½®å¤šä¸ª``<servlet-mapping>``ã€‚

**è§„åˆ™ï¼š** å®¹å™¨å»é™¤è¯·æ±‚çš„urlä¸­çš„ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œåªä¿ç•™å‰©ä¸‹çš„éƒ¨åˆ†è¿›è¡Œæ˜ å°„åŒ¹é…ã€‚å½“è¯·æ±‚åœ°å€åŒ¹é…åˆ°ä¸€ä¸ª``Servlet``åå°±ä¸ä¼šå†ç»§ç»­åŒ¹é…äº†ã€‚

**ä¸¾ä¾‹ï¼š** è¯·æ±‚çš„åœ°å€``http://localhost:8080/appDemo/index.html``ï¼Œå®¹å™¨ä¼šå»é™¤``http://localhost:8080/appDemo``ï¼Œæ‹¿å‰©ä¸‹çš„``/index.html``åšæ˜ å°„åŒ¹é…ã€‚

1ï¸âƒ£ **ç²¾ç¡®åŒ¹é…**  
&emsp;``<url-pattern>``ä¸``url``å®Œå…¨åŒ¹é… ã€‚  

```xml
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/user/users.html</url-pattern>
    <url-pattern>/index.html</url-pattern>
    <url-pattern>/user/addUser.action</url-pattern>
</servlet-mapping>
```

2ï¸âƒ£ **è·¯å¾„åŒ¹é…**  
ä»¥``/``å¼€å¤´ï¼Œå¹¶ä»¥``/*``ç»“å°¾ã€‚

```xml
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/user/users.html</url-pattern>
    <url-pattern>/index.html</url-pattern>
    <url-pattern>/user/addUser.action</url-pattern>
</servlet-mapping>
```

3ï¸âƒ£ **æ‰©å±•ååŒ¹é…**  
ä»¥``*.``å¼€å¤´ã€‚

```xml
<servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>*.jsp</url-pattern>
    <url-pattern>*.action</url-pattern>
</servlet-mapping>
```

4ï¸âƒ£ **ç¼ºçœåŒ¹é…**  
``<url-pattern>/</url-pattern>``å³ç¼ºçœåŒ¹é…ã€‚  

å…¶ä»–``Servlet``ä¸å¤„ç†çš„è¯·æ±‚éƒ½äº¤ç»™ç¼ºçœ``Servlet``æ¥å¤„ç†ã€‚æ¯”å¦‚404é¡µé¢ã€500é¡µé¢ç­‰éƒ½æ˜¯ç”±ç¼ºçœ``Servlet``æ¥æ‰§è¡Œçš„ã€‚

**åŒ¹é…é¡ºåºä¼˜å…ˆçº§**â¬‡ï¸

**ç²¾ç¡®åŒ¹é…** > **è·¯å¾„åŒ¹é…** > **æ‰©å±•ååŒ¹é…** > **ç¼ºçœåŒ¹é…**

**æ³¨æ„äº‹é¡¹**â¬‡ï¸

1. ä¸‰ç§åŒ¹é…æ–¹æ³•åªèƒ½æ‹©å…¶ä¸€ï¼Œä¸èƒ½ç»„åˆ
2. å¦‚æœ``*``åœ¨è·¯å¾„çš„ä¸­é—´ï¼Œåˆ™ä¸æ˜¯é€šé…ç¬¦è€Œæ˜¯ç²¾ç¡®åŒ¹é…
3. å…³äº``/``å’Œ``/*``çš„åŒºåˆ«  
``/``æ˜¯ç¼ºçœåŒ¹é…ï¼Œåªæœ‰ä¸€ä¸ªç¼ºçœå®ä¾‹ï¼Œä¼˜å…ˆçº§æœ€ä½ï¼Œä¸ä¼šè¦†ç›–å…¶ä»–çš„``<url-pattern>``  
``/*``æ˜¯è·¯å¾„åŒ¹é…ï¼Œèƒ½åŒ¹é…æ‰€æœ‰è·¯å¾„ï¼ŒåŒ…æ‹¬æ‰©å±•åï¼Œå®¹æ˜“å¼•èµ·404é”™è¯¯ï¼Œä¸€èˆ¬ç”¨äºç›‘å¬å™¨ï¼ˆfilterï¼‰

***
[*ServletåŒ¹é…è§„åˆ™*](https://www.cnblogs.com/canger/p/6084846.html)&emsp;[*Servletæ˜ å°„åŒ¹é…é—®é¢˜*](https://www.cnblogs.com/qianguyihao/p/4140529.html)

### \<context-param*> æ ‡ç­¾

``<context-param>``ç”¨äºå®šä¹‰ä¸Šä¸‹æ–‡åˆå§‹åŒ–å‚æ•°ã€‚

```xml
<context-param>
  <param-name>name</param-name>
  <param-value>Echo</param-value>
  <description>ç”¨æˆ·åå‚æ•°</description>
</context-param>
```

**è¯´æ˜**â¬‡ï¸

``<param-name>``ï¼šå‚æ•°åä¸º``name``  
``<param-value>``ï¼šå‚æ•°å€¼ä¸º``Echo``  
``<description>``ï¼šå¯é€‰ï¼Œæè¿°å‚æ•°

### \<session-config?> æ ‡ç­¾

``<session-config>``ç”¨äºè®¾ç½®å®¹å™¨çš„``session``å‚æ•°ã€‚

```xml
<session-config> 
   <session-timeout>120</session-timeout> 
</session-config> 
```

**è¯´æ˜**â¬‡ï¸

``<session-timeout>``ï¼š``session``å¤±æ•ˆæ—¶é—´120åˆ†é’Ÿï¼ˆé»˜è®¤30åˆ†é’Ÿï¼‰ï¼Œå€¼åªèƒ½ä¸ºæ•´æ•°ï¼Œä¸ºé›¶æˆ–è´Ÿæ•°æ—¶ä¼šè¯æ°¸ä¸è¿‡æœŸ

***
[*web.xmlè¯¦è§£*](https://blog.csdn.net/believejava/article/details/43229361)

## Servlet æ³¨è§£ï¼š``@WebServlet``

``Servlet 3.0``å¼•å…¥äº†æ³¨è§£çš„åŠŸèƒ½ï¼ˆ``javax.servlet.annotation.WebServlet``ï¼‰ï¼Œé€šè¿‡æ³¨è§£å¯ä»¥åœ¨ç±»å½“ä¸­è®¾ç½®åˆå§‹åŒ–å‚æ•°ï¼Œè€Œæ— éœ€å†åœ¨éƒ¨ç½²æè¿°ç¬¦ä¸­å†™ä»£ç ï¼Œä¸¤è€…ä¸å¯ä»¥é‡å¤è®¾ç½®ã€‚ä½¿ç”¨æ³¨è§£è¦æ±‚``Tomcat 7``æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

**å¸¸ç”¨å±æ€§ï¼š**

å±æ€§å | ç±»å‹ | å¯¹åº”æ ‡ç­¾ | æè¿° | æ˜¯å¦å¿…éœ€
-|-|-|-|-
 name | String | \<servlet-name> | æŒ‡å®š Servlet çš„ name å±æ€§ï¼Œæ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šæ—¶é»˜è®¤ä¸ºå®Œå…¨é™å®šåï¼ˆåŒ…å.ç±»åï¼‰ | å¦
 value | String[] | \<url-pattern> | ç­‰ä»·äº urlPatterns å±æ€§ï¼ŒåŒæ—¶æŒ‡å®šæ—¶é€šå¸¸å¿½ç•¥value | æ˜¯
 urlPatterns | String[] | \<url-pattern> | æŒ‡å®šä¸€ç»„ Servlet çš„ URL åŒ¹é…æ¨¡å¼ | æ˜¯
 loadOnStartUp | int | \<load-on-startup> | æŒ‡å®š Servlet åŠ è½½é¡ºåº | å¦
 initParams | WebInirParam[] | \<init-param> | æŒ‡å®šä¸€ç»„åˆå§‹åŒ–å‚æ•° | å¦
 description | String |\<description> | æè¿°ä¿¡æ¯ | å¦
 displayName | String | \<display-name> | Servlet æ˜¾ç¤ºå | å¦

### å¼€å¯/å…³é—­æ³¨è§£

åœ¨``<web-app>``æ ‡ç­¾ä¸­æœ‰ä¸€ä¸ªå±æ€§``metadata-complete``ï¼Œç”¨æ¥æŒ‡ç¤ºå½“å‰çš„``web.xml``æ–‡ä»¶æ˜¯å¦æ˜¯å®Œå…¨çš„ã€‚è¯¥å±æ€§çš„å€¼é»˜è®¤ä¸º``false``ï¼Œæ­¤æ—¶æ³¨è§£æ˜¯å¯ç”¨çš„ï¼›å½“``metadata-complete``çš„å€¼ä¸º``true``æ—¶ï¼Œè¡¨ç¤ºé…ç½®å®Œæ•´ï¼Œåˆ™ä¼šå¿½ç•¥æ³¨è§£å†…å®¹ã€‚

### ç®€å•åº”ç”¨

```java
//1.ç›´æ¥åœ¨æ‹¬å·å†…å†™å‡ºServletçš„ç›¸å¯¹è·¯å¾„
@Webâ€‹Servlet("/MyServlet");
//2.ä¸Šé¢ä»£ç çš„å®Œæ•´å†™æ³•
@WebServlet(â€‹urlPatterns = "/MyServlet");
//3.å¯ä»¥ç”¨valueä»£æ›¿urlPattern
@WebServlet(â€‹value = "/MyServlet")
```

### å…·ä½“åº”ç”¨

```java
@WebServlet(
 description = "æè¿°ä¿¡æ¯", 
 urlPatterns = { "/MyServlet" ï¼Œ, "/*"}, 
 initParams = {
  @WebInitParam(name = "å§“å", value = "æ½˜æ®·æµ©", description = "åœ¨æ ¡å­¦ç”Ÿ"), 
  @WebInitParam(name = "å¹´é¾„", value = "21å²", description = "ä¸­é’å¹´") 
  })
```

### ä¼˜ç¼ºç‚¹åˆ†æ

#### @WebServlet æ³¨è§£

**ä¼˜ï¼š** ç›´æ¥å†™åœ¨ Servlet ç±»ä¸­ï¼Œä»£ç å°‘ï¼Œé…ç½®ç®€å•ï¼Œä¸å…¶ä»–çš„ Servlet ç±»äº’ä¸å¹²æ‰°ï¼Œé€‚åˆå¤šäººå¼€å‘

**ç¼ºï¼š** Servletè¾ƒå¤šæ—¶ä¸ä¾¿äºæŸ¥æ‰¾å’Œä¿®æ”¹

#### web.xml é…ç½®æ–‡ä»¶

**ä¼˜ï¼š** é›†ä¸­ç®¡ç†é…ç½®ï¼Œä¾¿äºæŸ¥æ‰¾å’Œä¿®æ”¹

**ç¼ºï¼š** ä»£ç ç¹çï¼Œå¯è¯»æ€§ä¸å¼ºï¼Œä¸æ˜“ç†è§£

***
[*Servletæ³¨è§£*](http://c.biancheng.net/servlet2/webservlet.html)&emsp;[*Servlet-Annotations*](https://www.tutorialspoint.com/servlets/servlets-annotations.htm)

## Servlet ä»£ç æ¨¡æ¿

### å¯¼å…¥çš„åŒ…

ä¸€èˆ¬éœ€è¦å¯¼å…¥ä¸‹é¢è¿™äº›åŒ…ï¼š

```java
import java.io.IOException;
import java.io.PrintWriter;//å°†å¯¹è±¡çš„æ ¼å¼åŒ–è¡¨ç¤ºæ‰“å°åˆ°æ–‡æœ¬è¾“å‡ºæµ
import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;//å¼•å…¥Webæ³¨è§£åŠŸèƒ½
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
```

æ–¹æ³•ï¼š

```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                        throws ServletException, IOException {
    PrintWriter out = response.getWriter();//è·å–responseçš„è¾“å‡ºæµ
    out.println("<HTML>");//é€šè¿‡è¾“å‡ºæµè¾“å‡ºå“åº”å†…å®¹
    out.println("  <HEAD><TITLE>A Servlet</TITLE></HEAD>");
    out.println("  <BODY>");
    out.println("    This is a Servlet.");
    out.println("  </BODY>");
    out.println("</HTML>");
    out.flush();//åˆ·æ–°ç¼“å­˜
    out.close();//å…³é—­è¾“å‡ºæµ
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) 
                                        throws ServletException, IOException {
    doGet(request, response);//å½“ä½¿ç”¨POSTæ–¹å¼æäº¤æ—¶ï¼Œé€šè¿‡doPost()è°ƒç”¨doGet()
}

```

è·å–åˆå§‹åŒ–å‚æ•°ï¼š

```xml
<!-- web.xml ä»£ç ç‰‡æ®µ -->
  <context-param>
    <param-name>name</param-name>
    <param-value>echo</param-value>
  </context-param>

  <context-param>
    <param-name>age</param-name>
    <param-value>21</param-value>
  </context-param>

  <Servlet>
  <servlet-name>MyServlet</servlet-name>
  <servlet-class>servlet.Myservlet</servlet-class>
  <init-param>
  <param-name>date</param-name>
  <param-value>Sunday</param-value>
  </init-param>
  </servlet>

  <Servlet-mapping>
  <servlet-name>MyServlet</servlet-name>
  <url-pattern>/MyServlet</url-pattern>
  </servlet-mapping>  
```

```java
//Servlet ä»£ç æ®µ

//1.ä½¿ç”¨é»˜è®¤çš„ServletContextå¯¹è±¡
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                        throws ServletException, IOException {
    ServletContext sct1 = this.getServletContext();//è°ƒç”¨çˆ¶ç±»æ–¹æ³•è·å–å¯¹è±¡
    ServletConfig scg = this.getServletconfig();
    ServletContext sct2 = scg.getServletContext();
    String name = sct1.getInitParameter("name");//name = echo
    String age = sct2.getInitParameter("age");//age = 21
    String date = scg.getInitParameter("date");//date = Sunday
}

//2.è¦†å†™init()æ–¹æ³•ï¼Œä½¿ç”¨è‡ªå®šä¹‰configå¯¹è±¡è·å–ServletContextå¯¹è±¡
private ServletConfig config;//åˆ›å»ºä¸€ä¸ªconfigå¯¹è±¡
public void init(ServletConfig config) throws ServletException {
    this.config = config;//åˆå§‹åŒ–configå¯¹è±¡
}
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                        throws ServletException, IOException {
    ServletContext application = config.getServletContext();//è·å–ServletContextå¯¹è±¡
    String name = application.getInitParameter("name");//name = echo
}
```

**æ³¨ï¼š** å…¨å±€å‚æ•°å¯ä»¥è¢«Configæˆ–Contextè°ƒç”¨ï¼Œä½†æ˜¯Servletå†…éƒ¨å‚æ•°åªèƒ½è¢«è¯¥Servletçš„Configè°ƒç”¨

***
[ä¸Šä¸€ç« ï¼š02.Servletç”Ÿå‘½å‘¨æœŸ](./002.Servletç”Ÿå‘½å‘¨æœŸ.md)  

[ä¸‹ä¸€ç« ï¼š04.xxx](./02.Servletç”Ÿå‘½å‘¨æœŸ.md)  

[è¿”å›ç›®å½•](./index.md)