# [JSP](./index.md) | 01 Servlet基础

## 概念

Servlet（Server Applet），全称`Java Servlet`。  

Sevlet本质上是一段**Java程序或代码**，其运行在服务器端，用于响应客户端的请求。

Servlet是继承自`HttpServlet类`的Java类，通常由三个部分构成：  

- **导入的包**  

  ```java
  import java.io.*;
  import javax.servlet.*;
  ...
  ```
  
- **处理请求的方法**,包括``doGet()``和``doPost()``方法  

  ```java
  public void doGet(HttpServletRequest request,  
  HttpServletResponse response) throws 
  ServletException, IOException {
    //代码块
    }
  ```

- **向客户端发送的数据**
  
  ```java
  //上面代码块中的内容
  response.setContext("text/html;charset=UTF-8");
  PrintWriter out=response.getWriter();
  out.println("<html><head>
  <title>MyJSP</title>
  </head>
    <body>
      Hello World!<br>
    </body>
  </html>");
  ```

## Servlet和JSP的关系

JSP经过编译后生成的就是Servlet文件，JSP是Servlet的简化；  
JSP侧重视图，而Servlet主要用于逻辑控制。

JSP是Java和HTML组合的`.jsp`扩展文件，Sevlet则是纯Java代码；  
JSP中有内置对象，而Sevlet中没有。

Servlet能更好地组织业务逻辑代码，但是HTML代码可读性差、维护困难；  
JSP虽然规避了上述劣势，但是由于在HTML中混入大量Java代码，一样不可取。

## Servlet 接口和API

Servlet API所在包：

1. **javax.servlet包**  
包括**Servlet、ServletRequest、ServletConfig、ServletContext接口**以及**抽象类GenericServlet**.
2. **javax.servlet.http包**  
用于支持HTTP的Servlet API.

过程：  

&emsp;&emsp;当容器载入一个Servlet文件后，会建立该文件的Servlet接口实例。然后根据Servlet接口设定的初始化配置和其他信息（一般在web.xml中）创建一个ServletConfig实例。通过Servlet接口的init()方法传入该ServletConfig实例完成对Servlet实例的初始化。  

&emsp;&emsp;Servlet实例初始化完成后，当收到请求时，容器先通过urlPattern找到该Servlet实例，再调用其service()方法，传入ServletRequest、ServletResponse实例。  

&emsp;&emsp;Servlet实例在使用完回收前，容器通过destroy()方法执行资源的回收与释放。

## Servlet 接口

**所有的Servlet类都必须实现该接口。**  

Servlet 接口定义了5个方法，其中3个由Servlet容器调用，2个可以在JavaWeb的程序代码里访问。  

1. **init(ServletConfig config)**  
负责初始化Servlet对象，容器创建好Servlet对象后调用  
2. **service(ServletRequest req, ServletResponse res)**  
负责响应客户端请求，当用户要求访问特定Servlet对象时调用  
3. **destroy()**  
负责释放Servlet对象占用的资源，当Servlet对象结束生命周期时调用

***

4. **getServletConfig()**  
返回一个ServletConfig对象，该对象包含Servlet的初始化信息  
5. **getServletInfo()**  
返回一个字符串，其包含了Servlet创建者、版本和版权等信息

***
[上一章：00.开始之前](./00.开始之前.md)  

[下一章：00.Servlet基础](./01.Servlet基础.md)  

[返回目录](./index.md)