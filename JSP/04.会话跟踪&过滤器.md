# [JSP](./index.md) | 04 ä¼šè¯è·Ÿè¸ª & è¿‡æ»¤å™¨<!-- omit in toc -->

ğŸŒ¸Author [**Echo Pan**](https://github.com/echopan)

- [1. HttpSession ä¼šè¯è·Ÿè¸ªæŠ€æœ¯](#1-httpsession-ä¼šè¯è·Ÿè¸ªæŠ€æœ¯)
  - [1.1. æ¦‚å¿µ](#11-æ¦‚å¿µ)
  - [1.2. è·Ÿè¸ªæœºåˆ¶](#12-è·Ÿè¸ªæœºåˆ¶)
  - [1.3. ä¼šè¯çš„åˆ›å»ºå’Œä½¿ç”¨](#13-ä¼šè¯çš„åˆ›å»ºå’Œä½¿ç”¨)
    - [1.3.1. è·å–ä¼šè¯](#131-è·å–ä¼šè¯)
    - [1.3.2. å¸¸ç”¨æ–¹æ³•](#132-å¸¸ç”¨æ–¹æ³•)
    - [1.3.3. ç®€å•è®¡æ•°](#133-ç®€å•è®¡æ•°)
  - [1.4. ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸ](#14-ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸ)
- [2. è¿‡æ»¤å™¨](#2-è¿‡æ»¤å™¨)
  - [2.1. ç®€ä»‹](#21-ç®€ä»‹)
  - [2.2. è¿è¡Œè¿‡ç¨‹](#22-è¿è¡Œè¿‡ç¨‹)
  - [2.3. ä¸`Servlet`ç­‰ç»„ä»¶çš„åŒºåˆ«](#23-ä¸servletç­‰ç»„ä»¶çš„åŒºåˆ«)
  - [2.4. Filter API](#24-filter-api)
    - [2.4.1. `Filter`æ¥å£](#241-filteræ¥å£)
      - [2.4.1.1. `init()`æ–¹æ³•](#2411-initæ–¹æ³•)
      - [2.4.1.2. `doFilter()`æ–¹æ³•](#2412-dofilteræ–¹æ³•)
      - [2.4.1.3. `destroy()`æ–¹æ³•](#2413-destroyæ–¹æ³•)
    - [2.4.2. `FilterChain`æ¥å£](#242-filterchainæ¥å£)
    - [2.4.3. `FilterConfig`æ¥å£](#243-filterconfigæ¥å£)
  - [2.5. `Filter`ç®€å•åº”ç”¨](#25-filterç®€å•åº”ç”¨)
    - [2.5.1. `Myeclipse`åˆ›å»ºè¿‡æ»¤å™¨](#251-myeclipseåˆ›å»ºè¿‡æ»¤å™¨)
    - [2.5.2. è¿‡æ»¤å™¨é…ç½®](#252-è¿‡æ»¤å™¨é…ç½®)
      - [2.5.2.1. åœ¨`web.xml`ä¸­é…ç½®](#2521-åœ¨webxmlä¸­é…ç½®)
      - [2.5.2.2. åœ¨`@WebFilter`ä¸­é…ç½®](#2522-åœ¨webfilterä¸­é…ç½®)
    - [2.5.3. åº”ç”¨ç¤ºä¾‹](#253-åº”ç”¨ç¤ºä¾‹)
    - [2.5.4. è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜](#254-è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜)
    - [2.5.5. è·å–`session`å¯¹è±¡](#255-è·å–sessionå¯¹è±¡)

***

## 1. HttpSession ä¼šè¯è·Ÿè¸ªæŠ€æœ¯

### 1.1. æ¦‚å¿µ

ä¼šè¯ï¼ˆSessionï¼‰æ˜¯æŒ‡åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ŒæŸä¸€å®¢æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´ä¸€è¿ä¸²ç›¸å…³çš„äº¤äº’è¿‡ç¨‹ã€‚å½“å‰æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„å¤šæ¬¡è¯·æ±‚å’Œå“åº”å…³ç³»è¢«ç§°ä¸ºä¸€æ¬¡ä¼šè¯ã€‚åœ¨ä¸€ä¸ªä¼šè¯ä¸­ï¼Œç”¨æˆ·å¯ä»¥å¤šæ¬¡è®¿é—®åŒä¸€ç½‘é¡µï¼Œä¹Ÿå¯ä»¥è®¿é—®è¯¥æœåŠ¡å™¨çš„å…¶ä»–èµ„æºã€‚

### 1.2. è·Ÿè¸ªæœºåˆ¶

`HttpServlet`æ¥å£ä½äº`javax.servlet.http`åŒ…ï¼Œæ¯ä¸€ä¸ª`Servlet`å®¹å™¨ï¼ˆå¦‚`Tomcat`ï¼‰éƒ½å¿…é¡»å®ç°è¯¥æ¥å£ã€‚

å½“ä¸€ä¸ªä¼šè¯å¼€å§‹æ—¶ï¼Œå®¹å™¨ä¼šåˆ›å»ºä¸€ä¸ª`HttpSession`å¯¹è±¡ï¼Œå¹¶ä¸ºè¯¥å¯¹è±¡åˆ†é…ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œå³`sessionID`ã€‚å®¹å™¨ä¼šæŠŠ`sessionID`ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¸­ã€‚æ¯å½“å®¢æˆ·å‘å‡ºä¸€ä¸ª`HTTP`è¯·æ±‚æ—¶ï¼Œå®¹å™¨å°±å¯ä»¥ä»å®¢æˆ·ç«¯è¯»å–åˆ°`sessionID`ï¼Œå¹¶æ ¹æ®è¯¥æ ‡è¯†æ‰¾åˆ°å¯¹åº”çš„`HttpSession`å¯¹è±¡ï¼Œä»è€Œè·å–å®¢æˆ·çš„çŠ¶æ€ä¿¡æ¯ã€‚

### 1.3. ä¼šè¯çš„åˆ›å»ºå’Œä½¿ç”¨

#### 1.3.1. è·å–ä¼šè¯

```java
Httpsession session = HttpServletRequest.getSession([true]|[false]);
```

å½“å‚æ•°ä¸ºç©ºæˆ–`true`æ—¶ï¼Œå¦‚æœå­˜åœ¨ä¼šè¯åˆ™è¿”å›è¯¥ä¼šè¯ï¼Œä¸å­˜åœ¨æ—¶åˆ™åˆ›å»ºä¸€ä¸ªæ–°ä¼šè¯å¹¶è¿”å›ï¼›å½“å‚æ•°ä¸º`false`æ—¶ï¼Œå¦‚æœä¼šè¯ä¸å­˜åœ¨åˆ™è¿”å›`null`ã€‚

#### 1.3.2. å¸¸ç”¨æ–¹æ³•

**`setAttribute()`**  æ·»åŠ å±æ€§åŠå±æ€§å€¼

**`getAttribute()`**  è·å–å±æ€§å€¼ï¼Œè¿”å›`Object`ç±»å‹

**`getAttributeNames()`**  è·å–æ‰€æœ‰å±æ€§åï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„

**`removeAttribute()`**  ç§»é™¤ä¸€ä¸ªå±æ€§

***

**`getCreationTime()`**  è·å–ä¼šè¯åˆ›å»ºçš„æ—¶é—´

**`getId()`**  è·å–ä¼šè¯ID

**`getLastAccessedTime()`**  è·å–æœ€åä¸€æ¬¡è®¿é—®ä¼šè¯çš„æ—¶é—´æˆ³ï¼Œæ¯«ç§’

**`getMaxInactiveInterval()`**  è·å–ä¼šè¯æœ‰æ•ˆæœŸ

**`isNew()`**  æ‰“å¼€é¡µé¢æ—¶ï¼Œåˆ¤æ–­è¯¥é¡µé¢çš„sessionæ˜¯å¦æ˜¯é¦–æ¬¡åˆ›å»º

**`setMaxInactiveInterval()`**  è®¾ç½®æœ€å¤§æœ‰æ•ˆæœŸï¼Œå•ä½ç§’

***

**`Invalidate()`**  é‡Šæ”¾ä¼šè¯

#### 1.3.3. ç®€å•è®¡æ•°

å‡è®¾æˆ‘ä»¬åœ¨`doGet()`æ–¹æ³•ä¸­ä½¿ç”¨`session`å¯¹è±¡ï¼š

```java
//å…ˆè®¾ç½®ä¸€ä¸ªå¯ä¾›é“¾æ¥è®¿é—®è¯¥servletçš„æ³¨è§£
@WebServlet("/servlet/Counter");

protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                        throws ServletException, IOException {
    //è®¾ç½®ä¸­æ–‡ç¼–ç 
    response.setContentType("text/html;charset=UTF-8");

    //åˆ›å»ºä¸€ä¸ªsession
    HttpSession session = request.getSession(true);
    Object count = session.getAttribute("counter");
    int counter=0;

    //åˆ¤æ–­sessionå‚æ•°æ˜¯å¦å­˜åœ¨
    if(count == null){
      counter=1;//ä¸å­˜åœ¨åˆ™ç»™è®¡æ•°å™¨èµ‹å€¼1ï¼Œè¡¨ç¤ºå¼€å§‹è®¡æ•°
      session.setAttribute("Counter",counter);//æ›´æ–°sessionå‚æ•°å€¼
    }else{
      counter = Integer.parseInt(String.valueOf(count));//å­˜åœ¨åˆ™è·å–sessionå‚æ•°
      counter+=1;//å¹¶è¡¨ç¤ºè®¡æ•°åŠ 1
      session.setAttribute("Counter",counter);//æ›´æ–°sessionå‚æ•°
    }

    //ä¸‹é¢è¾“å‡ºè¯•è¯•çœ‹,å°è¯•å¤šåˆ·æ–°å‡ æ¬¡ç½‘é¡µ
    PrintWriter out = response.getWriter();
    out.println("è®¡æ•°å™¨æµ‹è¯•ï¼šç¬¬"+session.getAttribute("Counter")+"æ¬¡");
    out.flush;
    out.close;
}
```

### 1.4. ä¼šè¯çš„ç”Ÿå‘½å‘¨æœŸ

1. åˆ›å»º  
   æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œå®¹å™¨å³ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ª`session`å¯¹è±¡  
2. å…³é—­
   1. `session.invalidate()`æ–¹æ³•
   2. è¶…è¿‡æœ‰æ•ˆæœŸ
   3. å…³é—­æµè§ˆå™¨

## 2. è¿‡æ»¤å™¨

### 2.1. ç®€ä»‹

`Servlet 2.3`æ–°ç‰¹æ€§ï¼Œç”¨äºæ‹¦æˆªèµ„æºæ–‡ä»¶ï¼Œå®ç°è®¿é—®æ§åˆ¶ã€åŠ å¯†ã€è§£å†³ä¸­æ–‡ä¹±ç ã€æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ã€‚

### 2.2. è¿è¡Œè¿‡ç¨‹

**å®¢æˆ·ç«¯è¯·æ±‚ï¼š** ä½äºæœåŠ¡å™¨ç«¯çš„è¿‡æ»¤å™¨å¯¹è¯·æ±‚å†…å®¹è¿›è¡Œé¢„å¤„ç†ï¼Œå†ç”¨å¤„ç†å¥½çš„è¯·æ±‚å»è·å–webèµ„æºï¼ˆç”±`Servlet`äº§ç”Ÿï¼‰ï¼›  
**æœåŠ¡å™¨å“åº”ï¼š** webèµ„æºçš„å“åº”ç»è¿‡è¿‡æ»¤å™¨åå¤„ç†ï¼Œå¤„ç†å¥½å†å‘é€ç»™å®¢æˆ·ç«¯ã€‚

**client** --> **request** --> **filter** --> **servlet**

**servlet** --> **response** --> **filter** --> **client**

å¤šä¸ªè¿‡æ»¤å™¨å¯ä»¥å½¢æˆä¸€ä¸ª**è¿‡æ»¤å™¨é“¾**ï¼ŒæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œæœ€å…ˆæˆªå–è¯·æ±‚çš„è¿‡æ»¤å™¨æœ€åæˆªå–åˆ°å“åº”ã€‚

### 2.3. ä¸`Servlet`ç­‰ç»„ä»¶çš„åŒºåˆ«

`Servlet`ç»„ä»¶æ˜¯éœ€è¦è¯·æ±‚è¿›å…¥åˆ°`web`å®¹å™¨åå†å¯¹å…¶è¿›è¡Œå¤„ç†çš„ï¼Œè€Œ`filter`åˆ™æ˜¯â€œé“¾æ¥â€åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå³åœ¨è¯·æ±‚è¢«å®¹å™¨è·å–å¹¶å¤„ç†ä¹‹å‰è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒç†åœ¨å“åº”ä¿¡æ¯è¢«å‘é€å›å®¢æˆ·ç«¯ä¹‹å‰ä¹Ÿå¯ä»¥è¿›è¡Œåå¤„ç†ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„å¤„ç†é“¾ã€‚

### 2.4. Filter API

Filter API ä½äº`javax.servlet`åŒ…ä¸­ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ¥å£ï¼š

#### 2.4.1. `Filter`æ¥å£  

**æ‰€æœ‰è¿‡æ»¤å™¨éƒ½å¿…é¡»å®ç°`Filter`æ¥å£**ï¼Œä¸»è¦æ–¹æ³•ï¼š`init()`ã€`doFilter()`ã€`destroy()`ã€‚

##### 2.4.1.1. `init()`æ–¹æ³•

`web`å®¹å™¨åˆ›å»ºå®Œ`Filter`å®ä¾‹åï¼Œä¼š**ç«‹å³è°ƒç”¨**å…¶`init()`æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ä¼šå‘è¯¥å®ä¾‹ä¼ é€’ä¸€ä¸ªåŒ…å«`Filter`é…ç½®å’Œè¿è¡Œç¯å¢ƒçš„`FilterConfig`å¯¹è±¡ã€‚

é€šè¿‡`FilterConfig`å¯¹è±¡å¯ä»¥è·å¾—`ServletContext`å¯¹è±¡ï¼ˆç›¸å½“äº`applicaiton`èŒƒå›´ï¼‰åŠè¿‡æ»¤å™¨çš„`init-param`ï¼ˆé€šè¿‡`getInitParameter()`æ–¹æ³•ï¼‰ã€‚

```java
public void init(FilterConfig filterConfig) throws ServletException;
```

##### 2.4.1.2. `doFilter()`æ–¹æ³•

```java
public void doFilter(ServletRequest request,ServletResponse,FilterChain chain)
                     throws IOException,ServletException;
```

å…¶ä¸­`request`å’Œ`response`æ˜¯ä¼ é€’è¿‡æ¥çš„è¯·æ±‚æˆ–å“åº”ï¼Œå‚æ•°`chain`ä»£è¡¨å½“å‰`Filter`å¯¹è±¡çš„é“¾ï¼Œåœ¨è¯¥å¯¹è±¡çš„`doFilter()`æ–¹æ³•ä¸­è°ƒç”¨`chain.doFilter(request,response)`æ–¹æ³•å¯ä»¥æŠŠè¯·æ±‚ï¼ˆå“åº”ï¼‰è½¬å‘ç»™ä¸‹ä¸€ä¸ª`Filter`æˆ–ç›®æ ‡ç¨‹åºå»å¤„ç†ã€‚

##### 2.4.1.3. `destroy()`æ–¹æ³•

```java
public void destroy();
```

#### 2.4.2. `FilterChain`æ¥å£

ä»£è¡¨`Filter`é“¾ï¼Œåªæœ‰ä¸€ä¸ª`doFilter()`æ–¹æ³•ï¼Œæ˜¯**ç”±`Servlet`å®¹å™¨æä¾›**çš„ã€‚ç”¨æ¥è°ƒç”¨ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–ç›®æ ‡èµ„æºã€‚

#### 2.4.3. `FilterConfig`æ¥å£

ç”¨äºæ£€ç´¢è¿‡æ»¤å™¨åã€åˆå§‹åŒ–å‚æ•°ä»¥åŠå½“å‰çš„`Servlet`ä¸Šä¸‹æ–‡ã€‚

è¿”å›éƒ¨ç½²çš„è¿‡æ»¤å™¨åï¼š

```java
public String getFilterName();
```

è¿”å›è°ƒç”¨è€…æ‰€å¤„çš„servletä¸Šä¸‹æ–‡

```java
public ServletContext getServletContext();
```

è¿”å›åˆå§‹åŒ–å‚æ•°ï¼Œä¸å­˜åœ¨æ—¶è¿”å›`null`ï¼›è¿”å›åˆå§‹åŒ–å‚æ•°é›†åˆï¼Œä¸å­˜åœ¨æ—¶è¿”å›ç©ºå€¼ã€‚

```java
public String getInitParameter(String name);//nameä¸ºå‚æ•°å
public Enumeration getInitParameterNames();//è¿”å›æ‰€æœ‰åˆå§‹åŒ–å‚æ•°åç§°çš„é›†åˆï¼Œæ²¡æœ‰åˆ™è¿”å›ç©ºå€¼
```

### 2.5. `Filter`ç®€å•åº”ç”¨

è¿‡æ»¤å™¨å®è´¨ä¸Šæ˜¯ä¸€ä¸ªå®ç°äº†`javax.servlet.Filter`æ¥å£çš„`java`ç±»ã€‚æœ€åŸå§‹çš„åˆ›å»ºæ­¥éª¤æ˜¯ï¼š

1. åˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ç°`Filter`æ¥å£
2. é‡å†™æ‰€æœ‰æ¥å£æ–¹æ³•ï¼ˆ3ä¸ªæ–¹æ³•ï¼‰
3. åœ¨éƒ¨ç½²æè¿°ç¬¦æˆ–è€…æ³¨è§£ä¸­é…ç½®è¿‡æ»¤å™¨
4. å‘å¸ƒå¹¶è®¿é—®

#### 2.5.1. `Myeclipse`åˆ›å»ºè¿‡æ»¤å™¨

1. æ–°å»º - å…¶ä»– - web - è¿‡æ»¤å™¨

2. ä¹Ÿå¯ä»¥ç°åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿ï¼ˆimplementsï¼‰`Filter`æ¥å£ï¼Œå†å¿«é€Ÿä¿®å¤

ç”±äºè¿‡æ»¤å™¨åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œæ•…ä¿®æ”¹åéœ€è¦é‡å¯æœåŠ¡å™¨ç”Ÿæ•ˆã€‚

#### 2.5.2. è¿‡æ»¤å™¨é…ç½®

##### 2.5.2.1. åœ¨`web.xml`ä¸­é…ç½®

```xml
<filter>
<filter-name>è¿‡æ»¤å™¨å</filter-name>
<filter-class>è¿‡æ»¤å™¨ç±»</filter-class>
<init-param>
<param-name>å‚æ•°å</param-name>
<param-value>å‚æ•°å€¼</param-value>
</init-param>
</filter>

<filter-mapping>
<filter-name>è¿‡æ»¤å™¨å</filter-name>
<url-patterm>æ‹¦æˆªçš„URL</url-pattern>
<servlet-name>æ‹¦æˆªçš„servlet</servlet-name>
<dispatcher>æ‹¦æˆªçš„è°ƒç”¨æ–¹å¼</dispatcher>
</filter-mapping>
```

`dispatcher`æ ‡ç­¾çš„å‚æ•°å–å€¼ä¸º`REQUEST`ã€`ERROR`ã€`INCLUDE`å’Œ`FORWARD`ï¼Œæ ¹æ®å®¹å™¨ä¸­ç›®æ ‡èµ„æºè¢«è°ƒç”¨çš„æ–¹å¼å†³å®šæ˜¯å¦è§¦å‘è¿‡æ»¤å™¨ã€‚

**æ³¨ï¼š** ç»„ä»¶ä¹¦å†™é¡ºåºä¸å½±å“å®é™…é¡ºåºï¼Œå®é™…é¡ºåºå‚è€ƒ [èŠ‚ç‚¹åŠ è½½é¡ºåº](./03.åˆ›å»ºServletã€é…ç½®ã€å¸¸è§é—®é¢˜.md#webxmlèŠ‚ç‚¹åŠ è½½é¡ºåº) ã€‚å¯¹äºæ‹¥æœ‰ç›¸åŒ`filter-name`çš„`filter`å’Œ`filter-mapping`é…ç½®èŠ‚è€Œè¨€ï¼Œ`filter-mapping`å¿…é¡»å‡ºç°åœ¨`filter`ä¹‹åï¼Œå¦åˆ™å½“è§£æåˆ°`filter-mapping`æ—¶ï¼Œå®ƒæ‰€å¯¹åº”çš„`filter-name`è¿˜æœªå®šä¹‰ã€‚

[_é…ç½®åŠ è½½é¡ºåº_](https://blog.csdn.net/nt520/article/details/17452705)&emsp;[_Filterçš„web.xmlé…ç½®è¯¦è§£_](http://www.51gjie.com/javaweb/868.html)

***

##### 2.5.2.2. åœ¨`@WebFilter`ä¸­é…ç½®

```JAVA
@WebFilter(filterName="FilterDemo1",
            urlPatterns={"/*"},
            servletNames={"MyServlet"},
            initParams={
              @WebInitParam(name="param1",value="value1")
            }
          )
```

å…¶ä¸­ï¼Œ`urlPattern`æ˜¯åŒ¹é…å®¢æˆ·ç«¯è¯·æ±‚`URL`ï¼Œ`servletNames`æ˜¯åŒ¹é…`servlet`ã€‚

#### 2.5.3. åº”ç”¨ç¤ºä¾‹

è¦æ±‚ï¼šåˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œè¢«æ‰§è¡Œæ—¶åœ¨æ§åˆ¶å°è¾“å‡ºâ€æ‚¨çš„è¯·æ±‚å·²è¢«æ‹¦æˆªï¼â€œã€‚

1. åœ¨æºç çš„`src`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºåŒ…å’Œç±»
2. è¯¥ç±»å®ç°`Filter`æ¥å£å¹¶å®ç°æ–¹æ³•
3. åœ¨`doFilter()`æ–¹æ³•ä¸­ç¼–å†™é¢„å¤„ç†ä»£ç ï¼Œ  
   å¦‚ï¼š`System.out.println("æ‚¨çš„è¯·æ±‚å·²è¢«æ‹¦æˆªï¼");`

```java
@WebFilter(urlPatterns="/*",
			initParams= {
					@WebInitParam(name="student",value="echo")
			}	)
public class FilterDemo1 implements Filter {

  public FilterDemo1() {
  }
	public void destroy() {
	}

	public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) 
			throws IOException, ServletException {
		System.out.println("æ‚¨çš„è¯·æ±‚å·²è¢«æ‹¦æˆªï¼");
		chain.doFilter(request, response);
	}

	public void init(FilterConfig fConfig) throws ServletException {
	}

}
```

#### 2.5.4. è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜

æˆ‘ä»¬å¯ä»¥é€šè¿‡`Filter`ç»Ÿä¸€è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œåªéœ€è¦ç”¨è¿‡æ»¤å™¨æ‹¦æˆªç½‘é¡µè¯·æ±‚ï¼Œç„¶åæŠŠè¯·æ±‚çš„ç¼–ç æ ¼å¼æ›¿æ¢æˆ`UTF-8`å†ç»§ç»­æäº¤å°±å¯ä»¥äº†ã€‚

```java
request.setCharacterEncoding("UTF-8");
response.setContentType("text/html;charset=UTF-8");
```

#### 2.5.5. è·å–`session`å¯¹è±¡

```java
HttpServletRequest httpRequest=(HttpServletRequest)request;
HttpSession session=httpRequest.getSession();
String value=(String)session.getAttribute("value");
```

***

[ä¸Šä¸€ç« ï¼š03.åˆ›å»ºServletã€é…ç½®ã€å¸¸è§é—®é¢˜](./03.åˆ›å»ºServletã€é…ç½®ã€å¸¸è§é—®é¢˜.md)  

[ä¸‹ä¸€ç« ï¼š05.](./01.ç¯å¢ƒé…ç½®.md)  

[è¿”å›ç›®å½•](./index.md)